{% extends "base.html" %}
{% load static %}
{% load i18n %}
{% block title %}{% trans "Mitigation Intervention" %} {% endblock %}

{% block extraheader %}
<style>
  .select2-container--default .select2-selection--single .select2-selection__arrow {
    display: block !important;
  }
  #filter .select2-container--default .select2-selection--single {
    border: 1px solid #CADDF8 !important;
  }
  .miti_table .form-select,
  .miti_table .form-control {
    border: 1px solid #CADDF8 !important;
    color: #0b0b0b !important;
  }
</style>
{% endblock %}

{% block content %}
<!-- Breadcrumb Section -->
<section id="broadcrump">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-12">
        <div class="broadcrump__wrapper">
          <ul>
            <li>
              <span class="me-2"><i class="fa-solid fa-house mr-2" style="color: #0b0b0b;"></i> <i class="fa-solid fa-angle-right" style="color: #000;"></i></span><span
                class="BrdCrmb">{% trans "Mitigation Intervention" %}</span>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Hidden User Location Data -->
<div class="visually-hidden">
  <input type="hidden" id="userDistrictId" value="{{ user_location.district_id|default:'' }}">
  <input type="hidden" id="userCircleId" value="{{ user_location.circle_id|default:'' }}">
  <input type="hidden" id="userGramPanchayatId" value="{{ user_location.gram_panchayat_id|default:'' }}">
  <input type="hidden" id="userVillageId" value="{{ user_location.village_id|default:'' }}">
</div>

<!-- Filter Section -->
<section id="filter" class="mt-3">
  <div class="container-fluid">
    <div class="row g-3">
      <div class="col-md-3 col-xl-3 col-sm-6 d-flex flex-column">
        <label class="form-label fw-medium" for="district">{% trans "Select District" %}</label>
        <select name="district" id="district" class="form-select select2">
          <option value="" selected disabled>{% trans "Select Districts" %}</option>
        </select>
      </div>
      <div class="col-md-3 col-xl-3 col-sm-6 d-flex flex-column">
        <label class="form-label fw-medium" for="circle">{% trans "Select Circle" %}</label>
        <select name="circle" id="circle" class="form-select select2">
          <option value="" selected disabled>{% trans "Select Circle" %}</option>
        </select>
      </div>
      <div class="col-md-3 col-xl-3 col-sm-6 d-flex flex-column">
        <label class="form-label fw-medium" for="gram_panchayat">{% trans "Select Gram Panchayat" %}</label>
        <select name="gram_panchayat" id="gram_panchayat" class="form-select select2">
          <option value="" selected disabled>{% trans "Select Gram Panchayat" %}</option>
        </select>
      </div>
      <div class="col-md-3 col-xl-3 col-sm-6 d-flex flex-column">
        <label class="form-label fw-medium" for="village">{% trans "Select Village" %}</label>
        <select name="village" id="village" class="form-select select2">
          <option value="" selected disabled>{% trans "Select Villages" %}</option>
        </select>
      </div>
    </div>
  </div>
</section>
<div class="container-fluid d-flex flex-column">
<!-- Summary Section -->
<div class="summary-line">
    <svg class="svg-inline--fa fa-circle-info" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle-info" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336h24V272H216c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"></path></svg><!-- <i class="fas fa-info-circle"></i> Font Awesome fontawesome.com -->

    <span id="summary-text">Summary: District: <strong>1</strong> | Villages : <strong>6</strong></span>
  </div>

<!-- Selection Criteria and Mitigation Intervention Section -->
<section class=" mb-5 Selection_Criteria">
  <div class="con">
    <div class="card_selection bg-white">
      <div class="card-body pt-0">
        <!-- Selection Criteria -->
         <div class="d-flex justify-content-between align-items-center card_header">
         
        <h6 class="">{% trans "Selection Criteria" %}</h6></div>
        <div class="row g-3 ">
          <div class="col-md-6">
            <label class="form-label fw-medium" for="theme">{% trans "Theme/Sector" %}</label>
            <select name="theme" id="theme" class="form-select select2">
              <option value="governance" selected>{% trans "Governance & Partnerships for Resilience" %}</option>
              <option value="other">{% trans "Other" %}</option>
            </select>
          </div>
          <div class="col-md-6">
            <label class="form-label fw-medium" for="subtheme">{% trans "Sub-theme" %}</label>
            <select name="subtheme" id="subtheme" class="form-select select2">
              <option value="development" selected>{% trans "Development Activites" %}</option>
              <option value="other">{% trans "Other" %}</option>
            </select>
          </div>
          <div class="col-md-6">
            <label class="form-label fw-medium" for="component">{% trans "Component" %}</label>
            <select name="component" id="component" class="form-select select2">
              <option value="relief" selected>{% trans "Relief assistance, compensation norms, grievance mechanism" %}</option>
              <option value="other">{% trans "Other" %}</option>
            </select>
          </div>
          <div class="col-md-6">
            <label class="form-label fw-medium" for="vulnerable_asset">{% trans "Vulnerable Asset" %}</label>
            <input type="number" name="vulnerable_asset" id="vulnerable_asset" class="form-control" placeholder="{% trans 'Enter number' %}">
          </div>
        </div>
        
        <!-- Mitigation Intervention -->
        <h6 class="mb-4 mt-4 miti_headeign">{% trans "Mitigation Intervention" %}</h6>
        
        <div class="table-responsive miti_table">
          <table class="table table-borderless">
            <thead style="background-color: #e8f4f8;">
              <tr>
                <th class="py-3">{% trans "Component" %}</th>
                <th class="py-3">{% trans "Intervention Option" %}</th>
                <th class="py-3">{% trans "Quantity" %}</th>
                <th class="py-3">{% trans "Unit Cost (₹)" %}</th>
                <th class="py-3">{% trans "Estimated Cost (₹)" %}</th>
                <th class="py-3">{% trans "Action" %}</th>
              </tr>
            </thead>
            <tbody id="interventionTableBody">
              <tr class="">
                <td class="py-3">
                  <select class="form-select ">
                    <option>{% trans "Flood resilient housing construction" %}</option>
                    <option>{% trans "All weather road construction" %}</option>
                  </select>
                </td>
                <td class="py-3"><input type="text" class="form-control border-0"></td>
                <td class="py-3">
                  <div class="input-group">
                    <input type="number" class="form-control  text-center" value="100">
                   
                  </div>
                </td>
                <td class="py-3"><input type="text" class="form-control border-0" value="50,000" readonly></td>
                <td class="py-3"><strong>₹ 50,00,000</strong></td>
                <td class="py-3"><button class="btn btn-link text-danger p-0"><i class="fas fa-trash"></i></button></td>
              </tr>
              <tr class="">
                <td class="py-3">
                  <select class="form-select ">
                    <option>{% trans "All weather road construction" %}</option>
                    <option>{% trans "Flood resilient housing construction" %}</option>
                  </select>
                </td>
                <td class="py-3"><input type="text" class="form-control border-0"></td>
                <td class="py-3">
                  <div class="input-group">
                    <input type="number" class="form-control  text-center" value="50">
                  
                  </div>
                </td>
                <td class="py-3"><input type="text" class="form-control border-0" value="75,000" readonly></td>
                <td class="py-3"><strong>₹ 37,50,000</strong></td>
                <td class="py-3"><button class="btn btn-link text-danger p-0"><i class="fas fa-trash"></i></button></td>
              </tr>
            </tbody>
          </table>
            <button class="btn btn-link text-primary p-0 mt-2"><i class="fas fa-plus"></i> {% trans "Add Another Intervention" %}</button>
        </div>
        
      
        
        <div class="row align-items-center">
          <div class="col-md-6">
            <p class="mb-0"><strong>{% trans "Total Quantity" %}:</strong> 200 / 200</p>
          </div>
          <div class="col-md-6">
            <div class="text-end">
              <div class="d-inline-block cost_div">
                <p class="mb-0">{% trans "Total Estimated Cost" %}</p>
                <h4 class="mb-0 ">₹ 1,47,50,000</h4>
              </div>
            </div>
          </div>
        </div>
        
        <div class="text-end mt-4">
          <button class="btn cost_btn px-4" data-bs-toggle="modal" data-bs-target="#reviewModal">{% trans "Submit" %}</button>
        </div>
      </div>
    </div>
  </div>
</section>
</div>

<!-- Review and Confirm Modal -->
<div class="modal fade" id="reviewModal" tabindex="-1" aria-labelledby="reviewModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="card_header">
        <h6 class="modal-title" id="reviewModalLabel">{% trans "Review and Confirm" %}</h6>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <!-- Selection Summary -->
        <div class="bg-blue p-3 mb-3">
          <h6 class="mb-3">{% trans "Selection Summary" %}</h6>
          <div class="row">
            <div class="col-md-6">
              <p class="mb-2"><strong>{% trans "Theme/Sector:" %}</strong><br>Theme 1: Resilient Housing</p>
              <p class="mb-0"><strong>{% trans "Component:" %}</strong><br>Theme 1: Resilient Housing</p>
            </div>
            <div class="col-md-6">
              <p class="mb-2"><strong>{% trans "Sub-theme:" %}</strong><br>Flood resilient Housing</p>
              <p class="mb-0"><strong>{% trans "Vulnerable Asset:" %}</strong><br>Flood resilient Housing</p>
            </div>
          </div>
        </div>

        <!-- Planned Interventions -->
        <h6 class="mb-3">{% trans "Planned Interventions" %}</h6>
        
        <div class="bg-gray p-3 rounded mb-2">
          <div class="d-flex justify-content-between align-items-start">
            <div>
              <p class="mb-1 fw-bold">Flood resilient housing construction</p>
              <p class="mb-0 text-muted small">Quantity: 100 × Unit Cost: ₹50,000</p>
            </div>
            <p class="mb-0 fw-bold text-primary">₹ 50,00,000</p>
          </div>
        </div>

        <div class="bg-gray p-3 rounded mb-2">
          <div class="d-flex justify-content-between align-items-start">
            <div>
              <p class="mb-1 fw-bold">Erosion resilient housing relocation</p>
              <p class="mb-0 text-muted small">Quantity: 50 × Unit Cost: ₹75,000</p>
            </div>
            <p class="mb-0 fw-bold text-primary">₹ 37,50,000</p>
          </div>
        </div>

        <div class="bg-gray p-3 rounded mb-3">
          <div class="d-flex justify-content-between align-items-start">
            <div>
              <p class="mb-1 fw-bold">All-weather road construction</p>
              <p class="mb-0 text-muted small">Quantity: 50 × Unit Cost: ₹1,20,000</p>
            </div>
            <p class="mb-0 fw-bold text-primary">₹ 60,00,000</p>
          </div>
        </div>

        <!-- Total -->
        <div class="bg-darkgray p-3 rounded">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <p class="mb-0 fw-bold">{% trans "Total Quantity" %}</p>
              <p class="mb-0">200 / 200 units</p>
            </div>
            <div class="text-end">
              <p class="mb-0 ">{% trans "Total Estimated Cost" %}</p>
              <h4 class="mb-0 ">₹ 1,47,50,000</h4>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer border-0">
        <button type="button" class="btn  edit_btn" data-bs-dismiss="modal">{% trans "Edit" %}</button>
        <button type="button" class="btn confirm_btn">{% trans "Confirm & Submit" %}</button>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block extrajs %}
<script src="{% static 'js/vdmp_dashboard/vdmp_dashboard.js' %}"></script>
{% endblock %}
